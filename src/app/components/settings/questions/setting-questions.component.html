<main [formGroup]="settingsForm">
  <app-custom-sidebar
    [headerTemplate]="headerTemplate"
    [bodyTemplate]="bodyTemplate"
    [footerTemplate]="footerTemplate"
    [triggerSidebar]="ms.getSettingMode()"
  >
  </app-custom-sidebar>
  <ng-template #headerTemplate>
    <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–æ–ø—Ä–æ—Å–æ–≤</h3>
  </ng-template>
  <ng-template #bodyTemplate>
    @if (qs.getActualQuestions().length !== 1) {
      <label
        >–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ<span class="settings-sidebar__options--important"
          >*</span
        ></label
      >
      <app-select
        formControlName="numOfQuestions"
        [data]="dataMenu[0].options"
        [defaultItem]="ms.getCurrentNumOfQuestions()"
        (selectedItemEmitter)="changeNumOfQuestions($event)"
        [defaultInvalid]="
          onCastType(
            settingsForm.get('numOfQuestions')?.invalid &&
              settingsForm.get('numOfQuestions')?.touched
          )
        "
      />
      <main>
        <label
          *ngIf="
            onCastType(
              settingsForm.get('numOfQuestions')?.invalid &&
                settingsForm.get('numOfQuestions')?.touched
            )
          "
          >–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è!</label
        >
      </main>
      <br />
      <label
        >–°–ª–æ–∂–Ω–æ—Å—Ç–∏<span class="settings-sidebar__options--important"
          >*</span
        ></label
      >
      <app-multi-select
        formControlName="levels"
        [dataOptions]="dataMenu[2].options"
        (selectedOptionsEmitter)="selectionLevels($event)"
        [defaultInvalid]="
          onCastType(
            settingsForm.get('levels')?.invalid &&
              settingsForm.get('levels')?.touched
          )
        "
      ></app-multi-select>
      <main>
        <label
          *ngIf="
            onCastType(
              settingsForm.get('levels')?.invalid &&
                settingsForm.get('levels')?.touched
            )
          "
          >–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è!</label
        >
      </main>
      <br />
      <label
        >–ö–∞—Ç–µ–≥–æ—Ä–∏–∏<span class="settings-sidebar__options--important"
          >*</span
        ></label
      >

      <app-multi-select
        formControlName="categories"
        [dataOptions]="dataMenu[3].options"
        (selectedOptionsEmitter)="selectionCategory($event)"
        [defaultInvalid]="
          onCastType(
            settingsForm.get('categories')?.invalid &&
              settingsForm.get('categories')?.touched
          )
        "
      ></app-multi-select>
      <label
        *ngIf="
          onCastType(
            settingsForm.get('categories')?.invalid &&
              settingsForm.get('categories')?.touched
          )
        "
        >–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è!</label
      >
    } @else {
      <h3>–í—ã —É—Å–ø–µ—à–Ω–æ –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã üõà</h3>

      <main class="settings-sidebar__options__return">
        <app-custom-toggle
          [title]="'–ü—Ä–æ–π—Ç–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –µ—â–µ —Ä–∞–∑?'"
          [valueToggle]="ms.getValueToggle()"
          (toggleEmitter)="changeToggle($event)"
        />
      </main>
    }
  </ng-template>

  <ng-template #footerTemplate>
    <main class="settings-sidebar__options__buttons">
      @if (qs.getActualQuestions().length === 1 || settingsForm.invalid) {
        <div
          class="settings-sidebar__options__buttons__begin"
          [class.settings-sidebar__options__buttons__begin--inactive]="
            qs.getActualQuestions().length === 1 || settingsForm.invalid
          "
        >
          –ù–∞—á–∞—Ç—å ‚ñ∂
        </div>
      } @else {
        <div
          class="settings-sidebar__options__buttons__begin"
          routerLink="{{ ms.getRoute() }}"
          (click)="ms.setSettingMode(null)"
        >
          –ù–∞—á–∞—Ç—å ‚ñ∂
        </div>
      }

      <div
        class="settings-sidebar__options__buttons__close"
        (click)="hidePanel()"
      >
        –û—Ç–º–µ–Ω–∞
      </div>
      <div
        class="settings-sidebar__options__buttons__close"
        (click)="resetForm()"
      >
        Reset
      </div>
      <div
        class="settings-sidebar__options__buttons__close"
        (click)="fillingForm()"
      >
        Fill
      </div>
    </main>
  </ng-template>
</main>
